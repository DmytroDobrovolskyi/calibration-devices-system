<!DOCTYPE html>
<html>
<head>
<!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">-->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
<meta charset="utf-8">
</head>
<body>
	<div id="page-wrapper">

		<div class="row">
			<div class="col-md-12">
				<h1 class="page-header">Нові повірки</h1>
			</div>
		</div>

		<div class="row">
			<div class="col-md-12">
				<div class="panel panel-default">
					<div class="panel-heading">Останні дані</div>

				</div>
				<div class="panel-body">
					<div class="row">
						</div>
					<div class="row">
						<div class="col-md-12">
							<table ng-table="tableParams" template-pagination="custom/pager"
								   class="table table-bordered table-hover">
								<thead>
								<tr>
									<td></td>
									<td>
										<p class="input-group myDatePicker">
											<input type="text" class="form-control input-sm" datepicker-popup="{{format}}" ng-model="dt"
												   ng-change="changeDateToSend(dt)" is-open="openState.isOpen" min-date="minDate" datepicker-options="dateOptions"
												   date-disabled="disabled(date, mode)" ng-required="true" close-text="Close"/>

											  <span class="input-group-btn ">
											     <button type="button" class="btn btn-default myGroupBtn"
														 ng-click="open($event)">
													 <i class="glyphicon glyphicon-calendar"></i>
												 </button>
											  </span>
										</p>
									</td>
									<td>

										<div class="btn-group">
											<input type="text" class="form-control input-sm" ng-model="search.idText"
												   ng-change=doSearch()>
 		 									<span id="searchclear" class="glyphicon glyphicon-remove-circle"
												  ng-show="search.idText.length"
												  ng-click="clearId()"></span>
										</div>

									</td>
									<td>
										<div class="btn-group">
											<input type="text" class="form-control input-sm"
												   ng-model="search.lastNameText" ng-change=doSearch()>
                                                <span id="searchclear" class="glyphicon glyphicon-remove-circle"
													  ng-show="search.lastNameText.length"
													  ng-click="clearLastName()"></span>
										</div>
									</td>
									<td>
										<div class="btn-group ">
											<input type="text" class="form-control input-sm"
												   ng-model="search.streetText" ng-change=doSearch()>
                                                <span id="searchclear" class="glyphicon glyphicon-remove-circle"
													  ng-show="search.streetText.length"
													  ng-click="clearStreet()"></span>
										</div>
									</td>
									<td>
										<div class="btn-group ">
											<input type="text" class="form-control input-sm"
												   ng-model="search.status" ng-change=doSearch()>
                                                <span id="searchclear" class="glyphicon glyphicon-remove-circle"
													  ng-show="search.status.length"
													  ng-click="clearStatus()"></span>
										</div>
									</td>
									<td class="text-center clearInput">
										<button class="btn btn-danger btn-sm" ng-click="clearAll()"
												ng-show="search.streetText.length && search.lastNameText.length && search.idText.length && search.status.length">
											{{'CLEAR_ALL' | translate}}
										</button>
									</td>

									<td></td>
								</tr>
								<tr>
									<th><span class="glyphicon glyphicon-ok-sign"></span></th>
									<th class="col-md-2">Дата початку процесу повірки</th>
									<th>Реєстраційний номер повірки</th>
									<th>Прізвище клієнта</th>
									<th>Вулиця, на якій проживає клієнт</th>
									<th>Статус</th>
									<th>Відповідальна особа</th>
									<th class="text-center" >Дії<br/> <br/></th>
								</tr>
								</thead>
								<tbody>

								<tr ng-repeat="verification in $data"
									ng-class="{'unreadClass': verification.readStatus=='UNREAD'}">
									<td class="text-center">
										<input type="checkbox"
											   ng-click="resolveVerificationId(verification.id)"/>

									</td>
									<td>{{ verification.initialDate | date}}</td>
									<td class="verificationNumber">
                                        <span popover="{{verification.id}}" popover-trigger="mouseenter"
											  popover-placement="up">{{ verification.id}}</span></td>
									<td>{{ verification.surname }}</td>
									<td>{{ verification.street }}</td>
									<td>{{ verification.status }}</td>
									<td> {{verification.stateVerificatorEmployee}}</td>
									<td style="width: 12%">

										<div class="btn-group custom-btn-group">
											<button class="btn btn-xs btn-primary btn-actions-custom" popover="Детальніше"
													popover-trigger="mouseenter"
													ng-click="openDetails(verification.id, verification.initialDate, verification.readStatus)">
												<i class="fa fa-info"></i>
											</button>
											<button ng-show="!verification.providerEmployee"
													class="btn btn-xs btn-success btn-actions-custom" popover="Add employee"  popover-trigger="mouseenter"
													ng-click="addProviderEmployee(verification.id,verification.stateVerificatorEmployee)">
												<span class="glyphicon glyphicon-plus-sign"></span>
											</button>
											<button ng-show="verification.providerEmployee"
													class="btn btn-xs btn-danger btn-actions-custom" popover="Remove employee"
													popover-trigger="mouseenter"
													ng-click="removeProviderEmployee(verification.id)">
												<span class="glyphicon glyphicon-remove"></span>
											</button>
											<button class="btn btn-xs btn-primary btn-actions-custom" popover="Переглянути тест" popover-trigger="mouseenter"
													ng-click="testReview(verification.id)">
												<span class="glyphicon glyphicon-search"></span>
											</button>


										</div>
									</td>
								</tr>
								</tbody>
							</table>

							<script type="text/ng-template" id="custom/pager">
								<div>
									<ul class="pager ng-cloak">
										<li ng-repeat="page in pages"
											ng-class="{'disabled': !page.active, 'previous': page.type == 'prev', 'next': page.type == 'next'}"
											ng-show="page.type == 'prev' || page.type == 'next'" ng-switch="page.type">
											<a ng-switch-when="prev" ng-click="params.page(page.number)" href="">&laquo;
												Попередня</a>
											<a ng-switch-when="next" ng-click="params.page(page.number)"
											   href="">Наступна &raquo;</a>
										</li>
										<li>
											<div class="btn-group">
												<button type="button" ng-class="{'active':params.count() == 5}"
														ng-click="params.count(5)" class="btn btn-default">5
												</button>
												<button type="button" ng-class="{'active':params.count() == 10}"
														ng-click="params.count(10)" class="btn btn-default">10
												</button>
												<button type="button" ng-class="{'active':params.count() == 25}"
														ng-click="params.count(25)" class="btn btn-default">25
												</button>
												<button type="button" ng-class="{'active':params.count() == 50}"
														ng-click="params.count(50)" class="btn btn-default">50
												</button>
											</div>
										</li>
									</ul>
								</div>
							</script>

								<div class="pull-center">
								<div class="btn-group">
        						<button type="button" data-toggle="dropdown" class="btn btn-primary dropdown-toggle"><span class="glyphicon glyphicon-send"></span> Надіслати <span class="caret"></span></button>
							        <ul class="dropdown-menu">
							            <li><a  ng-click="openSendingModal()">
										Тест придатний <span class="glyphicon glyphicon-thumbs-up"></span></a></li>
							            <li class="divider"></li>
										<li><a ng-click="openSendingModalNotOK()">
											Тест непридатний <span class="glyphicon glyphicon-thumbs-down"></span></a></li>
							        </ul>
							    </div>
							    </div>
								<div class="pull-left">
								<p id="emptyError" ng-if="allIsEmpty && isClicked"
								   class="help-block pull-right">
									<span class="glyphicon glyphicon-exclamation-sign"></span>
									Оберіть хоча б одну пoвірку
								</p>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

</body>
</html>
